(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["2d21e5c3"],{d4da:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-page",{staticStyle:{"background-color":"#444"},attrs:{padding:""}},[a("q-list",{staticClass:"justify-center bg-white q-ma-md q-pa-md"},[e._v("\n\n    Voices\n    "),a("div",{staticStyle:{"max-width":"250px"}},[a("q-select",{attrs:{"hide-underline":"",options:e.voices},model:{value:e.selectedVoice,callback:function(t){e.selectedVoice=t},expression:"selectedVoice"}})],1),e._v("\n\n    Image size\n    "),a("div",{staticStyle:{"max-width":"250px"}},[a("q-btn-toggle",{attrs:{"toggle-color":"primary","no-caps":"",options:[{label:"Small",value:0},{label:"Medium",value:1},{label:"Large",value:2}]},model:{value:e.imageSize,callback:function(t){e.imageSize=t},expression:"imageSize"}})],1),a("q-btn",{attrs:{"no-caps":"",icon:"save",label:"Save"},on:{click:e.save}}),a("q-btn",{attrs:{"no-caps":"",icon:"restore",label:"Restore"},on:{click:e.restore}})],1),a("q-btn",{staticClass:"bg-white",attrs:{"no-caps":"",icon:"add",label:"Add new tab"},on:{click:e.addTab}}),e._l(e.tabs,function(t,s){return a("q-expansion-item",{key:s,staticClass:"q-ma-md",style:{background:t.tabColor},attrs:{"expand-separator":"",label:"Tab "+(s+1)+". "+t.name},scopedSlots:e._u([{key:"header",fn:function(){return[a("q-item-section",{attrs:{side:""}},[a("div",[a("q-btn",{attrs:{flat:"",icon:"delete"},on:{click:function(t){return e.deleteTab({tabIndex:s})}}}),a("q-chip",{staticClass:"q-mr-sm",attrs:{small:""}},[e._v(e._s(t.name))])],1)]),a("q-item-section")]},proxy:!0}],null,!0),model:{value:t.isOpen,callback:function(a){e.$set(t,"isOpen",a)},expression:"tab.isOpen"}},[a("q-btn",{staticClass:"q-mr-sm bg-white",attrs:{"no-caps":"",icon:"edit",label:"Edit tab name"}},[a("q-popup-edit",{attrs:{title:"Update tab name",buttons:""},model:{value:t.name,callback:function(a){e.$set(t,"name",a)},expression:"tab.name"}},[a("q-input",{model:{value:t.name,callback:function(a){e.$set(t,"name",a)},expression:"tab.name"}})],1)],1),a("q-btn",{staticClass:"q-mr-sm bg-white",attrs:{"no-caps":"",icon:"add",label:"Add image"},on:{click:function(t){return e.addImage({tabIndex:s})}}}),a("q-btn",{staticClass:"q-mr-sm bg-white",attrs:{"no-caps":"",icon:"colorize",label:"Tab color"}},[a("q-popup-proxy",[a("q-color",{attrs:{"no-header":"",value:"tab.tabColor"},on:{change:function(t){return e.updateTabColor({tabIndex:s,tabColor:t})}}})],1)],1),a("q-list",{staticClass:"justify-center bg-white q-ma-sm",attrs:{separator:""}},e._l(t.images,function(t,n){return a("q-item",{key:s+"-"+n,attrs:{dense:""}},[a("q-item-section",[a("q-item-label",[a("q-chip",{staticClass:"q-mr-sm",attrs:{icon:"edit",small:""}},[e._v("\n              "+e._s(t.name)+"\n              "),a("q-popup-edit",{attrs:{buttons:""},model:{value:t.name,callback:function(a){e.$set(t,"name",a)},expression:"image.name"}},[a("q-input",{model:{value:t.name,callback:function(a){e.$set(t,"name",a)},expression:"image.name"}})],1)],1)],1),a("q-item-label",{attrs:{caption:""}},[e._v(e._s(t.url))]),a("div",[a("q-btn",{staticClass:"q-pa-sm",attrs:{"no-caps":"",flat:"",icon:"play_arrow",label:"Play"}}),a("q-btn",{staticClass:"q-pa-sm",attrs:{"no-caps":"",flat:"",icon:"delete",label:"Delete"},on:{click:function(t){return e.deleteImage({tabIndex:s,imageIndex:n})}}}),a("q-checkbox",{attrs:{label:"Unavailable"},model:{value:t.unavailable,callback:function(a){e.$set(t,"unavailable",a)},expression:"image.unavailable"}}),a("q-checkbox",{attrs:{label:"Hidden"},model:{value:t.hidden,callback:function(a){e.$set(t,"hidden",a)},expression:"image.hidden"}})],1)],1),a("q-item-section",{attrs:{side:""}},[a("q-img",{staticStyle:{width:"100px"},attrs:{src:t.url}})],1)],1)}),1)],1)}),a("q-expansion-item",{staticClass:"q-ma-md bg-white",scopedSlots:e._u([{key:"header",fn:function(){return[a("q-item-section",{attrs:{side:""}},[a("div",[a("q-chip",{staticClass:"q-mr-sm",attrs:{small:""}},[e._v("Voice bar")])],1)]),a("q-item-section")]},proxy:!0}])},[a("q-list",{staticClass:"justify-center bg-white q-ma-sm",attrs:{separator:""}},e._l(e.phrase,function(t,s){return a("q-item",{key:"phrase-"+s,attrs:{dense:""}},[a("q-item-section",[a("q-item-label",[a("q-chip",{staticClass:"q-mr-sm",attrs:{icon:"edit",small:""}},[e._v("\n              "+e._s(t.name)+"\n              "),a("q-popup-edit",{attrs:{buttons:""},model:{value:t.name,callback:function(a){e.$set(t,"name",a)},expression:"image.name"}},[a("q-input",{model:{value:t.name,callback:function(a){e.$set(t,"name",a)},expression:"image.name"}})],1)],1)],1),a("q-item-label",{attrs:{caption:""}},[e._v(e._s(t.url))]),a("div",[a("q-btn",{staticClass:"q-pa-sm",attrs:{"no-caps":"",flat:"",icon:"play_arrow",label:"Play"}})],1)],1),a("q-item-section",{attrs:{side:""}},[a("q-img",{staticStyle:{width:"100px"},attrs:{src:t.url}})],1)],1)}),1)],1),a("q-dialog",{model:{value:e.opened,callback:function(t){e.opened=t},expression:"opened"}},[a("Media",{directives:[{name:"show",rawName:"v-show",value:!0,expression:"true"}],on:{close:e.close}})],1)],2)},n=[],i=(a("7f7f"),a("28a5"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-layout",[a("q-page-container",[a("q-page",{staticClass:"flex flex-center bg-white"},[a("q-btn",{attrs:{label:"Close"},on:{click:e.close}}),a("q-field",{attrs:{icon:"cloud",label:"Search images"}}),a("q-input",{on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.filterItems(t)}},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}}),a("q-infinite-scroll",{ref:"infiniteScroll",on:{load:e.loadMore}},[e._l(e.items,function(t,s){return a("div",{key:s,staticClass:"caption",staticStyle:{display:"inline-block",padding:"10px"}},[a("q-card",{staticClass:"bg-white",staticStyle:{width:"200px"},attrs:{inline:""}},[a("q-img",{staticStyle:{padding:"20px"},attrs:{src:t.url}}),a("q-card-section",[e._v("\n              "+e._s(t.name)+"\n              ")]),a("q-separator"),a("q-card-actions",[a("q-btn",{attrs:{flat:"",icon:"add"},on:{click:function(t){return e.addImage(s)}}}),a("q-btn",{attrs:{flat:"",icon:"info"}}),a("q-btn",{attrs:{flat:"",icon:"share"}}),a("q-btn",{attrs:{flat:"",icon:"visibility"}})],1)],1)],1)}),a("q-spinner-dots",{attrs:{slot:"message",size:40},slot:"message"})],2)],1)],1)],1)}),o=[],l={name:"Media",data:function(){return{items:[],terms:"",filter:""}},methods:{loadMore:function(e,t){var a=this;console.log("Calling loadMore",e),this.$axios.get("https://mavoix-connect.herokuapp.com/files?q=".concat(this.filter,"&_page=").concat(e)).then(function(e){e.data.length<10&&a.$refs.infiniteScroll.stop(),console.log("Loading",e.data);var s=e.data.map(function(e){var t=e.links.download,a=e.filename;return{url:t,name:a}});a.items=a.items.concat(s),t()}).catch(function(e){return t(!0)})},filterItems:function(){console.log("Filtering",this.filter),this.items.length=0,this.$refs.infiniteScroll.reset(),this.$refs.infiniteScroll.resume(),this.$refs.infiniteScroll.trigger()},addImage:function(e){this.$emit("close",{result:"select",image:this.items[e]})},close:function(){this.$emit("close",{result:"cancel"})}}},c=l,r=a("2877"),m=Object(r["a"])(c,i,o,!1,null,null,null),d=m.exports,u=a("bc78"),p={name:"Configure",data:function(){return{opened:!1,selectedTab:0,imageSize:1}},computed:{tabs:function(){return this.$store.state.mavoix.tabs},phrase:function(){return this.$store.state.mavoix.phrase},tabColor:{get:function(){return this.$store.state.mavoix.tabColor},set:function(e){this.$store.commit("mavoix/updateTabColor",e)}},voices:function(){var e=this;return this.$store.state.mavoix.voices.map(function(t){var a,s,n=t.lang.split("-")[1],i=e.$countryFlagEmoji.data[n];return"undefined"===typeof i?(a=t.lang+" FLAG",s="UNDEFINED"):(a=i.emoji,s=t.lang+" "+i.name),{label:"".concat(a," ").concat(t.name," (").concat(s,")"),value:t.name}})},selectedVoice:{get:function(){return this.$store.state.mavoix.selectedVoice},set:function(e){console.log("set selected voice to",e.value),this.$store.commit("mavoix/updateSelectedVoice",e.value)}}},mounted:function(){console.log("configure"),console.log("store tabs:",this.$store.state.mavoix.tabs)},methods:{addTab:function(){console.log("add tab");var e=u["a"].rgbToHex(u["a"].hsvToRgb({h:360*Math.random(),s:40,v:80,a:100}));this.$store.state.mavoix.tabs.push({name:"Untitled",tabColor:e,images:[]})},deleteTab:function(e){var t=e.tabIndex;this.$store.state.mavoix.tabs.splice(t,1)},addImage:function(e){var t=e.tabIndex;this.opened=!0,this.selectedTab=t},deleteImage:function(e){var t=e.tabIndex,a=e.imageIndex;this.$store.state.mavoix.tabs[t].images.splice(a,1)},close:function(e){switch(e.result){case"cancel":break;case"select":var t=e.image;t.name=t.url.split("/").pop().split(".")[0],t.unavailable=!1,t.hidden=!1,this.$store.state.mavoix.tabs[this.selectedTab].images.push(t);break}this.opened=!1,console.log(e)},updateTabColor:function(e){var t=e.tabIndex,a=e.tabColor;console.log("update tab color",a,", tab index",t),this.$store.commit("mavoix/updateTabColor",{tabIndex:t,tabColor:a})},save:function(){var e=this,t=JSON.parse(JSON.stringify(this.$store.state.mavoix)),a=t.id,s=t.name,n=t.voice,i=t.tabs;this.$axios.put("https://mavoix-connect.herokuapp.com/users/".concat(a),{id:a,name:s,voice:n,tabs:i}).then(function(t){console.log(t),e.$q.notify({message:"Successfully saved",color:"green"})}).catch(function(t){console.log(t),e.$q.notify({message:"Save failed",color:"red"})})},restore:function(){console.log("Restore"),this.$q.notify({message:"Not implemented yet",color:"orange"})}},components:{Media:d}},b=p,f=Object(r["a"])(b,s,n,!1,null,null,null);t["default"]=f.exports}}]);